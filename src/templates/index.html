
{% extends "base.html" %}

{% block main %}
<!-- App interface -->
<div class="app-interface">
    <form method="post" action="/" enctype="multipart/form-data">

        <!-- file uploads -->
        <div class="w3-row w3-container">
            <!-- Upload tree -->
            <div class="w3-col s3 w3-center upload-image-panel"> <!-- using this number of pixels here means number of pixels either side of 'choose file' box is equal when browser is at smallest screen size -->
                <p>Tree</p>
                <img src="{{url_for('static', filename='tree.png')}}" alt="Tree" class="upload-image">
                <input class="file-upload-button" type="file" id="tree-file" name="tree_file">
                <label for="tree_format" class="upload-file-format"><span>Format:          </span></label>
                <select name="tree_format" id="tree_format">
                    <option value="newick" {{form['tree_in_format_newick']}}>Newick</option>
                    <option value="nexus" {{form['tree_in_format_nexus']}}>Nexus</option>
                </select>
            </div>

            <!-- Upload alignment -->
            <div class="w3-col s3 w3-center upload-image-panel">
                <p>Alignment</p>
                <img src="{{url_for('static', filename='tree.png')}}" alt="Alignment" class="upload-image">
                <input class="file-upload-button" type="file" id="alignment-file" name="alignment_file">
<!--                <div class="upload-file-format">Format:</div>-->
                <label for="alignment_format" class="upload-file-format"><span>Format:     </span></label>
                <select name="alignment_format" id="alignment_format">
                    <option value="fasta" {{form['alignment_format_fasta']}}>Fasta</option>
                    <option value="nexus" {form['alignment_format_nexus']}}>Nexus</option>
                </select>
            </div>
        </div>

        <!-- Colour branches checkbox -->
        <div class="w3-row w3-container w3-padding">
            <div class="w3-col s6 w3-center branches">
                <!-- TODO format checkbox nicely -->
                <input type="checkbox" name="branches" value="True" {{form['branches']}}> Colour branches </input>
            </div>
        </div>

        <!-- Output file format -->
        <div class="w3-row w3-container w3-padding">
            <div class="w3-col s6 w3-center output-file-format">
               <div>
                   <label for="output_format">Output file format:</label>
               </div>
               <select name="output_format">
                   <option value="figtree" {{form['tree_out_format_figtree']}}>Figtree</option>
                   <option value="xml" {{form['tree_out_format_xml']}}>XML</option>
               </select>
            </div>
        </div>

                <!-- Choose sites -->
        <div class="w3-row w3-container w3-padding">
            <div class="w3-col s6 w3-center choose-sites">
               <input type="radio" name="choose_sites" value="{{all_sites_id}}" {{form['choose_sites_all']}}>All sites<br>
               <input type="radio" name="choose_sites" value="SITE_RANGE" {{form['choose_sites_range']}}>Choose sites:<br>
               <input type="text"  placeholder="e.g. 1-5, 9, 11-13" name="sites_range" value="{{form['sites_string']}}"> <!-- TODO change to use placeholder attribute -->
            </div>
        </div>

        <div class="w3-row w3-container w3-padding">
            <div class="w3-col s6 w3-center submit">
               <input type="submit">
            </div>
        </div>
    </form>

</div>
    <div class="gap">
        <span style="display: none;">Messages:</span>
    </div>

<div>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="message">
                <span class="close-button" onclick="this.parentElement.style.display='none';">&times;</span>
                {% for category, message in messages %}
                    <p>{{ message }}</p>
<!--                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Tempus egestas sed sed risus pretium quam. Pharetra magna ac placerat vestibulum. Maecenas sed enim ut sem viverra aliquet eget sit. Dignissim suspendisse in est ante in nibh mauris cursus mattis. Sed blandit libero volutpat sed cras ornare arcu dui vivamus. Tincidunt nunc pulvinar sapien et ligula ullamcorper malesuada. Tempus quam pellentesque nec nam aliquam. In egestas erat imperdiet sed euismod. Diam maecenas sed enim ut sem viverra aliquet eget. In mollis nunc sed id. Senectus et netus et malesuada. Ac turpis egestas sed tempus urna et pharetra. Enim lobortis scelerisque fermentum dui faucibus in. Placerat in egestas erat imperdiet. Consectetur adipiscing elit ut aliquam purus sit amet luctus venenatis. Nulla pharetra diam sit amet nisl suscipit adipiscing bibendum est. Quis imperdiet massa tincidunt nunc pulvinar. Morbi tristique senectus et netus et malesuada fames. </p>-->
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
</div>


{% endblock %}
